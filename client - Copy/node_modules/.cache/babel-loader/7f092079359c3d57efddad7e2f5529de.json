{"ast":null,"code":"import jwt_decode from'jwt-decode';import axios from'axios';import{GET_ERRORS,SET_CURRENT_USER}from'./types';import setAuthToken from'../utils/setAuthToken';export var registerUser=function registerUser(userData,history){return function(dispatch){axios.post('/api/users/register',userData).then(function(res){return history.push('/login');}).catch(function(err){return dispatch({type:GET_ERRORS,payload:err.response.data});});};};export var loginUser=function loginUser(userData){return function(dispatch){axios.post('/api/users/login',userData).then(function(res){var token=res.data.token;localStorage.setItem('jwtToken',token);setAuthToken(token);var decoded=jwt_decode(token);dispatch(setCurrentUser(decoded));}).catch(function(err){return dispatch({type:GET_ERRORS,payload:err.response.data});});};};export var setCurrentUser=function setCurrentUser(decoded){return{type:SET_CURRENT_USER,payload:decoded};};export var logOut=function logOut(){return function(dispatch){localStorage.removeItem('jwtToken');setAuthToken(false);dispatch(setCurrentUser({}));};};","map":{"version":3,"sources":["C:/Users/aman/Desktop/Dev-connector/client/src/actions/authAction.js"],"names":["jwt_decode","axios","GET_ERRORS","SET_CURRENT_USER","setAuthToken","registerUser","userData","history","dispatch","post","then","res","push","catch","err","type","payload","response","data","loginUser","token","localStorage","setItem","decoded","setCurrentUser","logOut","removeItem"],"mappings":"AAAA,MAAOA,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,UAAR,CAAmBC,gBAAnB,KAA0C,SAA1C,CACA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,CAGA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,QAAD,CAAWC,OAAX,QAAsB,UAAAC,QAAQ,CAAI,CAEzDP,KAAK,CAACQ,IAAN,CAAW,qBAAX,CAAkCH,QAAlC,EACQI,IADR,CACa,SAAAC,GAAG,QAAGJ,CAAAA,OAAO,CAACK,IAAR,CAAa,QAAb,CAAH,EADhB,EAEQC,KAFR,CAEc,SAAAC,GAAG,QACNN,CAAAA,QAAQ,CAAC,CACLO,IAAI,CAACb,UADA,CAELc,OAAO,CAACF,GAAG,CAACG,QAAJ,CAAaC,IAFhB,CAAD,CADF,EAFjB,EASJ,CAX2B,EAArB,CAYP,MAAO,IAAMC,CAAAA,SAAS,CAAE,QAAXA,CAAAA,SAAW,CAACb,QAAD,QAAa,UAACE,QAAD,CAAc,CAE/CP,KAAK,CACJQ,IADD,CACM,kBADN,CACyBH,QADzB,EAEOI,IAFP,CAEY,SAAAC,GAAG,CACP,CACE,GAAOS,CAAAA,KAAP,CAAeT,GAAG,CAACO,IAAnB,CAAOE,KAAP,CACAC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAgCF,KAAhC,EACAhB,YAAY,CAACgB,KAAD,CAAZ,CACA,GAAMG,CAAAA,OAAO,CAAEvB,UAAU,CAACoB,KAAD,CAAzB,CAEAZ,QAAQ,CAACgB,cAAc,CAACD,OAAD,CAAf,CAAR,CACH,CAVP,EAWOV,KAXP,CAWa,SAAAC,GAAG,QACRN,CAAAA,QAAQ,CAAC,CACTO,IAAI,CAACb,UADI,CAETc,OAAO,CAACF,GAAG,CAACG,QAAJ,CAAaC,IAFZ,CAAD,CADA,EAXhB,EAgBH,CAlBuB,EAAjB,CAmBP,MAAO,IAAMM,CAAAA,cAAc,CAAE,QAAhBA,CAAAA,cAAgB,CAACD,OAAD,CAAa,CACtC,MAAO,CACHR,IAAI,CAACZ,gBADF,CAEHa,OAAO,CAACO,OAFL,CAAP,CAIH,CALM,CAMP,MAAO,IAAME,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,SAAM,UAACjB,QAAD,CAAc,CACtCa,YAAY,CAACK,UAAb,CAAwB,UAAxB,EACAtB,YAAY,CAAC,KAAD,CAAZ,CACAI,QAAQ,CAACgB,cAAc,CAAC,EAAD,CAAf,CAAR,CACH,CAJqB,EAAf","sourcesContent":["import jwt_decode from 'jwt-decode';\r\nimport axios from 'axios';\r\nimport {GET_ERRORS,SET_CURRENT_USER} from './types';\r\nimport setAuthToken from '../utils/setAuthToken';\r\n\r\n\r\nexport const registerUser = (userData, history) =>dispatch => {\r\n\r\n     axios.post('/api/users/register', userData)\r\n            .then(res =>history.push('/login'))\r\n            .catch(err=>\r\n                dispatch({\r\n                    type:GET_ERRORS,\r\n                    payload:err.response.data \r\n                }\r\n                ))  \r\n   \r\n}\r\nexport const loginUser =(userData) =>(dispatch) => {\r\n\r\n    axios\r\n    .post('/api/users/login',userData)\r\n          .then(res => \r\n            {\r\n              const {token} =res.data\r\n              localStorage.setItem('jwtToken',token)\r\n              setAuthToken(token)\r\n              const decoded =jwt_decode(token);\r\n\r\n              dispatch(setCurrentUser(decoded))\r\n          })\r\n          .catch(err => \r\n            dispatch({\r\n            type:GET_ERRORS,\r\n            payload:err.response.data\r\n        }))\r\n}\r\nexport const setCurrentUser= (decoded) => {\r\n    return {\r\n        type:SET_CURRENT_USER,\r\n        payload:decoded \r\n    }\r\n}\r\nexport const logOut = () => (dispatch) => {\r\n    localStorage.removeItem('jwtToken');\r\n    setAuthToken(false);\r\n    dispatch(setCurrentUser({}))\r\n}"]},"metadata":{},"sourceType":"module"}